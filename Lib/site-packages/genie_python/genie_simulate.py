from __future__ import absolute_import
from __future__ import print_function
from builtins import object
from genie import _get_correct_globals
import genie_simulate_impl


class Simulate(object):
    def __init__(self):
        self.globs = _get_correct_globals()
        self.genie = self.globs['g']
        self.previous_api = self.genie._genie_api

    def __enter__(self):
        self.genie._genie_api = genie_simulate_impl.API(None, self.globs)

    def __exit__(self, *args):
        self.genie._genie_api = self.previous_api
